<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8">
	<title></title>
	<script type="text/javascript" src="jquery.min.js"> </script>
</head>
<body>

	<select onchange="chamarFuncao(this)" id="opcoes">
		<option value="0">Escolha uma opção</option>
		<option id="1" value="1">Cº > Fº</option>
		<option id="2" value="2">Ano</option>
		<option id="3" value="3">valor 3</option>
		<option id="4" value="4">Tempo</option>
	</select>

	<div class="container" id="conteudo">

	</div>

	<script>
		var div = document.getElementById('conteudo')
		div.innerHTML = '<p> Selecione uma opção </p>'	

		zero = ''
		um = ''
		
		function chamarFuncao (valor) {
			var values = valor.value;  
			var div = document.getElementById('conteudo')
			div.innerHTML = '<p> Selecione uma opção </p>'	

			//Escolher uma opção
			if (values == '0') {
				div.innerHTML = '<p> Selecione uma opção </p>'
				var x = document.getElementById("EscolherAno");
				if(x) {
					var obj = document.getElementById("EscolherAno");
					obj.remove();
				}
			}
			//calcular temperatura
			if (values == '1') {
				
				div.innerHTML = '<h1> Calcular c para f </h1>'
				div.innerHTML += '<input onkeyup="funcaoCal(\'c\')" id="c" type="number" name="c" placeholder="insirir valor de c" ><input onkeyup="funcaoCal(\'f\')" id="f" type="number" name="f" placeholder="insirir valor de f" >'
				var x = document.getElementById("EscolherAno");
				if(x) {
					var obj = document.getElementById("EscolherAno");
					obj.remove();
				}
			}
			//calcular anos
			if (values == '2') {
				div.innerHTML = '<h1> Calcular ano </h1>'
				var myParent = document.body;

				//Create array of options to be added
				var ano = [];
				for (var z = 1950; z <= 2021; z++) {
					x = z
					if (x <= 2021) {
						ano.push(x)
					}
				}

				//Create and append select list
				var selectList = document.createElement("select");
				selectList.id = "EscolherAno";
				selectList.className = "teste"
				myParent.appendChild(selectList);
				var o = document.createElement("option");
				o.value = 0;
				o.text = "selecione uma data";
				o.id = 0;
				selectList.appendChild(o);
				//Create and append the options
				for (var i = 0; i < ano.length; i++) {
					var option = document.createElement("option");
					option.value = ano[i];
					option.text = ano[i];
					option.id = ano[i];
					selectList.appendChild(option);
				}

				document.getElementById("EscolherAno").onchange = function (e) {
					if (this.value === 0) {
						var p = document.createElement("P")
						var t = document.createTextNode("selecione um ano")
					}
					y = new Date().getFullYear()
					a = this.value 
					r = y-a

					x = document.createElement("SPAN")
					var t = document.createTextNode("você tem " + r);
					x.appendChild(t);
					document.body.appendChild(x);
				}
			}

			if (values == '3') {

				var gjson
				var gjsonbrl
				gjsonbrl = getJSON('https://economia.awesomeapi.com.br/all/BRL-USD')
				gparsebrl = []
				gparsebrl = JSON.parse(gjsonbrl)
				y = gparsebrl.BRL.ask
				gjson = getJSON('https://economia.awesomeapi.com.br/all/USD-BRL')
				gparse = []
				gparse = JSON.parse(gjson)
				x = gparse.USD.ask
				console.log(x)
				console.log(y)
				console.log(gparsebrl)
				div.innerHTML = '<h1 style="display: block; margin: 10px 0 0 0;"> Teste </h1>'
				
				div.innerHTML += '<input style="display: block; margin-top: 10px;" onkeyup="dolarhoje(\'r\')" type="number" name="r" id="r" placeholder="real">'
				// div.innerHTML += '<br />'
				div.innerHTML += '<input style="display: block; margin-top: 10px;" onkeyup="dolarhoje(\'d\')" type="number" id="d" placeholder="dolar">'
				// div.innerHTML += '<br />'
				div.innerHTML += '<input style="display:none;" type="number" name="m" id="m" value="'+ y +'" placeholder="digite o real">'
				div.innerHTML += '<input style="display:none;" type="number" name="n" id="n" value="'+ x +'" placeholder="digite o real">'

				var ss = document.createElement("link");
				ss.type = "text/css";
				ss.rel = "stylesheet";
				ss.href = "mone.css";
				document.getElementsByTagName("head")[0].appendChild(ss);

				localStorage.setItem("mode", "dark");
				console.log(localStorage.getItem('mode'))
			}

			if (values === '4') {
				div.innerHTML = '<input type="text" name="cidade" id="cidade" placeholder="Digite sua cidade">'
				
			}
		}

		function dolarhoje(tipo) {
			
			if (tipo === 'r') {
				var dolar = eval(document.getElementById('r').value)
				// var real = eval(document.getElementById('d').value)
				var m = eval(document.getElementById('m').value)
				var dolar1 = eval(dolar.valor)
				console.log(dolar)
				var soma = m*dolar
				document.getElementById('d').value = soma
				console.log(soma)
			}
			if(tipo === 'd') {
				var real = eval(document.getElementById('d').value)
				var n = eval(document.getElementById('n').value)
				var rm = eval(real.value)
				var soma = n*real
				console.log('soma '+ soma)
				console.log(real)
				document.getElementById('r').value = soma
			}
		}

		function funcaoCal(tipo){
			if (tipo === 'c') {
				var c = eval(document.getElementById('c').value)
				console.log(c)
				var t = eval(c.value)
				console.log(t)
				var soma = (c*9/5) + 32
				document.getElementById('f').value = soma
				console.log(soma)
			}
			if (tipo === 'f') {
				var f = eval(document.getElementById('f').value)
				console.log(f)
				var soma = (f-32) * 5/9
				document.getElementById('c').value = soma
			}
		}

		//json com api dolar hoje



		function getJSON(url) {
			var resp ;
			var xmlHttp ;

			resp  = '' ;
			xmlHttp = new XMLHttpRequest();

			if(xmlHttp != null)
			{
				xmlHttp.open( "GET", url, false );
				xmlHttp.send( null );
				resp = xmlHttp.responseText;
			}

			return resp ;
		}


		function previsaoDoTempo (cidade){
			var gjson;
			cidade = document.getElementById('cidade').value
			cidadeLimpo = cidade.trim()
			console.log(cidadeLimpo)
			gjson = getJSON('api.openweathermap.org/data/2.5/weather?q='+ cidadeLimpo +'&appid=3afac56adb9f7d966b87c8d394072dc4')
			gparse = []
			gparse = JSON.parse(gjson)
			return gparse
		}

	</script>
</body>
</html>